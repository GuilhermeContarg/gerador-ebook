<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Ebooks com IA</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
    <div class="container">
        <h1>Gerador de Ebooks com IA</h1>
        <p class="subtitle">Crie ebooks personalizados com a ajuda da inteligência artificial</p>

        <form id="ebookForm">
            <div class="form-group">
                <label for="googleApiKey">Chave API do Google Gemini (ou OpenAI):</label>
                <input type="text" id="googleApiKey" name="google_api_key"
                    placeholder="Cole sua chave API do Gemini aqui (obrigatório se não usar OpenAI)">
            </div>

            <div class="form-group">
                <label for="openaiApiKey">Chave API da OpenAI (opcional):</label>
                <input type="text" id="openaiApiKey" name="openai_api_key"
                    placeholder="Cole sua chave API da OpenAI aqui (obrigatório se não usar Gemini)">
            </div>

            <div class="form-group">
                <label for="openaiModel">Modelo OpenAI (opcional, padrão: gpt-4o-mini):</label>
                <input type="text" id="openaiModel" name="openai_model" placeholder="Ex: gpt-4o-mini">
            </div>

            <div class="form-group">
                <label for="personality">Personalidade e Habilidades do Agente:</label>
                <textarea id="personality" name="personality" rows="4"
                    placeholder="Ex: Você é um escritor criativo com expertise em ficção científica. Sua escrita é envolvente e cheia de detalhes visuais."></textarea>
            </div>

            <div class="form-group">
                <label for="textContent">Conteúdo Principal do Ebook:</label>
                <textarea id="textContent" name="text_content" rows="8"
                    placeholder="Digite ou cole o texto base do seu ebook aqui..." required></textarea>
            </div>

            <div class="form-group">
                <label for="files">Arquivos de Referência (PDF, TXT):</label>
                <input type="file" id="files" name="files" multiple accept=".pdf,.txt">
                <small>Você pode fazer upload de vários arquivos para servir como base ou referência.</small>
            </div>

            <div class="form-group">
                <label for="outputPath">Salvar PDF em (opcional):</label>
                <input type="text" id="outputPath" name="output_path" placeholder="Ex.: C:\ebooks\meu_ebook.pdf">
                <small>Deixe em branco para usar o padrão do sistema.</small>
            </div>

            <div class="form-group">
                <label for="backendUrl">URL do Backend:</label>
                <input type="text" id="backendUrl" placeholder="Ex.: http://localhost:5001">
                <small>Informe o endpoint do seu deploy (Render, Railway, etc.). O padrão é
                    http://localhost:5001.</small>
            </div>

            <button type="submit" class="btn-generate">Gerar Ebook</button>
        </form>

        <div id="status" class="status"></div>

        <div class="log-wrapper">
            <h2>Status em tempo real</h2>
            <div id="progressLog" class="log-panel" aria-live="polite" aria-atomic="false">
                <p class="log-placeholder">Os eventos do processo aparecerão aqui.</p>
            </div>
        </div>

        <div id="downloadSection" class="download-section" style="display: none;">
            <p>Seu ebook foi gerado com sucesso!</p>
            <a id="downloadLink" href="#" download class="btn-download">Baixar Ebook</a>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>

</html>